---
import { Image } from 'astro:assets';
import BaseLayout from '@src/layouts/BaseLayout.astro';
import Ava from '@src/assets/img/alessandro_a.jpg';
import Prose from '@src/components/Prose.astro';
import { getProfile } from '@src/data/profile';
import { getUiCopy } from '@src/i18n/ui';
import { resolveLang, SUPPORTED_LANGS, type Lang } from '@src/i18n/config';

export function getStaticPaths() {
  return SUPPORTED_LANGS.map((lang: Lang) => ({ params: { lang } }));
}

const lang = resolveLang(Astro.params.lang);
const profile = getProfile(lang);
const copy = getUiCopy(lang);

const title = `${copy.menu.about} â€” ${profile.name}`;
const description = profile.siteDescription;
---

<BaseLayout
	title={title}
	description={description}
  lang={lang}
>
  <div class='container'>
		<main class='prose text-lg dark:prose-invert'>
      <article>
        <div class='w-full md:flex md:items-center gap-16 mb-10'>
          <div class="text-pretty leading-9">
            <h1 class="text-4xl font-bold mb-4">{profile.name}</h1>
            <Prose>
              <div class="text-lg">
                <p class="text-xl leading-relaxed">{profile.tagline}</p>
                {
                  profile.summary.map((item) => (
                    <p>{item}</p>
                  ))
                }
                <p>{copy.about.locationPrefix} {profile.location}. {copy.about.reachPrefix} <a href={`mailto:${profile.email}`} class="underline">{profile.email}</a> {copy.about.orcidPrefix} <a href={profile.orcid} class="underline" target="_blank" rel="noopener noreferrer">{copy.about.orcidLabel}</a>.</p>
              </div>
            </Prose>
          </div>
          <Image src={Ava} alt={profile.name} width={320}  class="rounded-3xl rotate-3 mx-4 md:mx-0"/>
        </div>     
        <section class="mb-8">
          <h2 class="text-2xl font-semibold mb-3">{copy.about.focusTitle}</h2>
          <ul class="list-disc pl-5 space-y-2">
            {
              profile.focus.map((item) => (
                <li>
                  <strong>{item.title}.</strong> {item.description}
                </li>
              ))
            }
          </ul>
        </section>
        <section class="mb-8">
          <h2 class="text-2xl font-semibold mb-3">{copy.about.educationTitle}</h2>
          <ul class="list-disc pl-5 space-y-1">
            {
              profile.experience.map((item) => (
                <li>{item}</li>
              ))
            }
          </ul>
        </section>
        <section class="mb-8">
          <h2 class="text-2xl font-semibold mb-3">{copy.about.connectTitle}</h2>
          <ul class="list-disc pl-5 space-y-1">
            <li><a class="underline" href={`mailto:${profile.email}`}>Email</a></li>
            <li><a class="underline" href={profile.social.github} target="_blank" rel="noopener noreferrer">GitHub</a></li>
            <li><a class="underline" href={profile.orcid} target="_blank" rel="noopener noreferrer">ORCID</a></li>
          </ul>
        </section>
      </article>
    </main>
  </div>
</BaseLayout>
